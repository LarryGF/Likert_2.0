Vue.use(VueMaterial.default)

const app = new Vue({
	el: "#app",
	data: {
		active:false,
		step:'',
		users:'',
		last_id:0,
		selected:[],
		select:false,
		table_obj:[],
		table_crit:[],
		name:'',
		category:'',
		crit1:'',
		crit2:'',
		crit3:'',
		crit4:'',
		crit5:'',
		likert_table_obj:[],
		likert_table_crit:[],
		deleted_items:'',
		show:false,
		summary_list:[],
		summary_list_obj:[],
		summary_list_crit:[],
		values_list:[],

	},
	methods: {
		delitems: async function (selected,last_id) {
			let result = await eel.delitems(selected,last_id)();
			switch (result[0]){
				case 'objective':
					this.table_obj = result[1];
					break;
				case 'criterion':
					this.table_crit = result[1];
					break;
			}
			this.selected = [];
			
		},
		onSelect (items) {
        this.selected = items
      	},
		
		load: async function () {
			let tables = await eel.load()();
			
			this.table_obj = tables[0];
			this.table_crit = tables[1];
			this.last_id = tables[2];
			this.values_list = tables[3];
		},
		save: function (select,dic,last_id) {
			switch(select){
				case 'Criterion':
					this.last_id = last_id+1;
					dic.id = this.last_id;
					this.table_crit.push(dic);
					break;

				case 'Objective':
					if(this.category == null){
						this.category = "You must type a business' value"
					}
					else{
					this.last_id = last_id+1;
					dic.id = this.last_id;
					this.table_obj.push(dic);
					this.values_list.push(dic['category']);
					break;
				}
			}
			this.clear()
		},

		save_to_file: async function (table,list,last_id) {
			
			let result = await eel.save(table,list,last_id,this.values_list)();
		},

		check: async function (last_id) {
			this.show=false;
			let result = await eel.check(this.users,this.table_obj,this.table_crit,last_id)();
			
			switch(result[2]){
				case true:
					app.table_obj = result[0];
					app.table_crit = result[1];
					app.deleted_items = result[3];
					this.active = true;
					break;
				case false:
					this.run();
					
					break;

				case 1:
					this.deleted_items = "You must have at least one user";
					this.show = true;
					break;
			}

			

		},

		run: async function(){
			let result = await eel.run(this.table_obj,this.table_crit,this.users)();
			this.likert_table_obj = result[0];
			this.likert_table_crit = result[1];
			this.summary_list_obj = result[2];
			this.summary_list_crit = result[3];
			console.log(this.summary_list_crit)
			this.step = 'results';
			this.summary();
		},
		summary: async function() {
			let result = await eel.summary(this.values_list,this.likert_table_obj,this.users)();
			// this.step = '';
			this.summary_list = result;

		},

		onCancel () {
			
			this.show = true;
		},

		onConfirm () {
			console.log('confirm')
			this.run();
		},
		clear () {
			this.name='';
			this.category='';
			this.crit1='';
			this.crit2='';
			this.crit3='';
			this.crit4='';
			this.crit5='';
		}


	}
})







		
		
		
		
		
		
		